<form  *ngIf="recipe" #form="ngForm" (ngSubmit)="updateRecipe(form)" class="recipe-form">
  <h2>Edit Recipe</h2>

  <div class="form-row">
    <div class="form-group">
      <label for="title">Recipe Name</label>
      <input 
        type="text" 
        id="title" 
        name="title" 
        [(ngModel)]="recipe.title"
        placeholder="Enter recipe name" 
        #inputTitle="ngModel" 
        required minlength="5" />
      <ng-container *ngIf="inputTitle.touched">
        <p *ngIf="inputTitle.errors?.['required']" class="error">Title is required!</p>
        <p class="error" *ngIf="inputTitle.errors?.['minlength']">Title must be at least 5 characters!</p>
      </ng-container>
    </div>

    <div class="form-group">
      <label for="protein">Protein (g)</label>
      <input 
        type="number" 
        id="protein" 
        name="protein" 
        [(ngModel)]="recipe.protein"
        placeholder="Amount of protein" 
        #inputProtein="ngModel" 
        required />
      <ng-container *ngIf="inputProtein.touched">
        <p *ngIf="inputProtein.errors?.['required']" class="error">Protein is required!</p>
      </ng-container>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="calories">Calories (kcal)</label>
      <input 
        type="number" 
        id="calories" 
        name="calories" 
        [(ngModel)]="recipe.calories"
        placeholder="Calories count"  
        #inputCalories="ngModel" 
        required />
      <ng-container *ngIf="inputCalories.touched">
        <p *ngIf="inputCalories.errors?.['required']" class="error">Calories is required!</p>
      </ng-container>
    </div>

    <div class="form-group">
      <label for="prepTime">Preparation Time (minutes)</label>
      <input 
        type="number" 
        id="prepTime" 
        name="prepTime" 
        [(ngModel)]="recipe.prepTime"
        placeholder="Preparation time in minutes"  
        #inputPrepTime="ngModel" 
        required min="5"/>
      <ng-container *ngIf="inputPrepTime.touched">
        <p *ngIf="inputPrepTime.errors?.['required']" class="error">Preparation time is required!</p>
      </ng-container>
    </div>
  </div>

  <div class="form-row single-col">
    <div class="form-group">
      <label for="imageUrl">Image Url</label>
      <input 
        id="imageUrl" 
        name="imageUrl" 
        [(ngModel)]="recipe.imageUrl"
        placeholder="Image Url"  
        #inputImageUrl="ngModel" 
        required minlength="10"/>
      <ng-container *ngIf="inputImageUrl.touched">
        <p *ngIf="inputImageUrl.errors?.['required']" class="error">Image Url is required!</p>
      </ng-container>
    </div>
  </div>

  <div class="form-row single-col">
    <div class="form-group">
      <label for="description">Short Description</label>
      <textarea 
        id="description" 
        name="description" 
        [(ngModel)]="recipe.description"
        placeholder="Brief description" 
        rows="3"  
        #inputDescription="ngModel" 
        required minlength="10"></textarea>
      <ng-container *ngIf="inputDescription.touched">
        <p *ngIf="inputDescription.errors?.['required']" class="error">Description is required!</p>
        <p class="error" *ngIf="inputDescription.errors?.['minlength']">Description must be at least 10 characters!</p>
      </ng-container>
    </div>
  </div>

  <div class="form-row single-col">
    <div class="form-group">
      <label for="preparation">Preparation Steps</label>
      <textarea 
        id="preparation" 
        name="preparation" 
        [(ngModel)]="stepsInput"
        placeholder="Step by step instructions (comma separated)" 
        rows="5"  
        #inputPrepSteps="ngModel" 
        required minlength="10"></textarea>
      <ng-container *ngIf="inputPrepSteps.touched">
        <p *ngIf="inputPrepSteps.errors?.['required']" class="error">Preparation steps are required!</p>
      </ng-container>
    </div>
  </div>

  <button class="submit-btn" [disabled]="form.invalid" [style]="{backgroundColor:form.invalid ? 'grey' : '#ae44c0'}">Save Recipe</button>
</form>
